:begin
CREATE CONSTRAINT ON (node:User) ASSERT (node.uuid) IS UNIQUE;
CREATE CONSTRAINT ON (node:Game) ASSERT (node.uuid) IS UNIQUE;
CREATE CONSTRAINT ON (node:League) ASSERT (node.uuid) IS UNIQUE;
:commit
CALL db.awaitIndexes(300);
:begin
UNWIND [{uuid:"a334c7b2-d031-46cf-b7db-9401326e2147", properties:{password:"1234", avatar:"4", email:"vanja@gmail.com", username:"Vanja"}}, {uuid:"fba9bf6e-38c3-438d-95a2-99b7787e7667", properties:{password:"1234", avatar:"5", email:"alex@gmail.com", username:"Alexander"}}, {uuid:"9f64bdab-865a-4346-a689-bf81ac2c9ea8", properties:{password:"1234", avatar:"4", email:"melvin@gmail.com", username:"Melvin"}}, {uuid:"2b64a6f9-d0e0-4590-817f-2318ba0fc242", properties:{password:"1234", avatar:"4", email:"avery@gmail.com", username:"Avery"}}, {uuid:"00233343-7927-488c-8dab-6a6c9752b7b3", properties:{password:"1234", avatar:"1", email:"kristina@gmail.com", username:"Kristina"}}, {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4", properties:{password:"1234", avatar:"5", email:"calle@gmail.com", username:"Calle"}}, {uuid:"46a62ede-ee9e-411d-aaa5-158b4e1cc3dc", properties:{password:"1234", avatar:"5", email:"jocke@gmail.com", username:"Joacim"}}, {uuid:"69d3d8e0-b330-4677-8b9d-dfc958623c27", properties:{password:"1234", avatar:"5", email:"janis@gmail.com", username:"Janis"}}, {uuid:"68adb9e7-e2d6-4e2d-9a7d-c182caac7798", properties:{password:"1234", avatar:"3", email:"mats@gmail.com", username:"Mats"}}, {uuid:"9ced20c8-61b8-46ca-9c0b-ce44c40ea528", properties:{password:"1234", avatar:"1", email:"annlouise@gmail.com", username:"Ann-Louise"}}, {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f", properties:{password:"1234", avatar:"2", email:"donald@gmail.com", username:"Donald"}}, {uuid:"93391a41-34e7-43ac-a714-c86c7706308b", properties:{password:"1234", avatar:"3", email:"joachim@gmail.com", username:"Joachim"}}] AS row
MERGE (n:User{uuid: row.uuid}) SET n += row.properties;
UNWIND [{uuid:"07fa9cc6-c372-4287-8e60-f1d9882c368c", properties:{date:1610235648282, pointsToWin:15.0, status:"Finished"}}, {uuid:"b0540c9e-68a0-4ca4-8647-b34e2ce406c8", properties:{date:1610235823976, pointsToWin:15.0, status:"Finished"}}, {uuid:"a626c3de-afca-4bb4-815f-caae3752b88a", properties:{date:1610235928691, pointsToWin:15.0, status:"Finished"}}, {uuid:"68a205a0-07e8-4f51-bc25-9920035c8393", properties:{date:1610236027798, pointsToWin:15.0, status:"Finished"}}, {uuid:"a9571631-ea5e-4851-b0f7-91205bec1e8b", properties:{date:1610236189534, pointsToWin:15.0, status:"Finished"}}, {uuid:"40bd98a4-f916-4619-b841-ab6ad538a8b7", properties:{date:1610236288830, pointsToWin:15.0, status:"Finished"}}, {uuid:"8a077ed2-4091-4902-9e1c-16337805e2de", properties:{date:1610236346594, pointsToWin:15.0, status:"Finished"}}, {uuid:"7a59df35-c794-40e9-9355-39796c2f08c6", properties:{date:1610236481818, pointsToWin:15.0, status:"Finished"}}, {uuid:"f3bb5fe8-f1bb-49e6-b007-94097b98c04a", properties:{date:1610236572774, pointsToWin:15.0, status:"Finished"}}, {uuid:"ac2c20cf-614e-41b9-86fc-8f811dc9704c", properties:{date:1610236659733, pointsToWin:15.0, status:"Finished"}}, {uuid:"8b3159a2-d5aa-4d0f-90e2-0308d8434bb9", properties:{date:1610236938983, pointsToWin:15.0, status:"Finished"}}, {uuid:"1961e96b-5166-46e7-a24b-98b09309565a", properties:{date:1610237058021, pointsToWin:15.0, status:"Finished"}}, {uuid:"40ac21d1-5e5c-4417-b918-8d5c1b2b232b", properties:{date:1610237106710, pointsToWin:15.0, status:"Finished"}}, {uuid:"ef956b61-014b-47d0-9371-016f8fc90f7c", properties:{date:1610237253360, pointsToWin:15.0, status:"Finished"}}, {uuid:"fe76a7ab-6592-43c8-ac47-9cff0501189c", properties:{date:1610237366016, pointsToWin:15.0, status:"Finished"}}, {uuid:"556e05a2-ad9b-41bc-83d2-e87331bb7993", properties:{date:1610296186569, pointsToWin:15.0, status:"Finished"}}, {uuid:"ff6a5795-169a-4853-83ea-5025d45c8b3b", properties:{date:1610491394492, pointsToWin:15.0, status:"Finished"}}] AS row
MERGE (n:Game{uuid: row.uuid}) SET n += row.properties;
UNWIND [{uuid:"b761a5eb-bd58-492e-925c-51c039baf570", properties:{pointsToWin:16, league:"EC", cardsOnHand:5}}, {uuid:"cd42adde-a78d-4675-9b32-d46690c5b29c", properties:{pointsToWin:20, league:"Sweden", cardsOnHand:5}}, {uuid:"e21a0938-145d-4f96-9823-090cdea5b17d", properties:{pointsToWin:20, league:"Scania", cardsOnHand:8}}] AS row
MERGE (n:League{uuid: row.uuid}) SET n += row.properties;
:commit
:begin
UNWIND [{start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"07fa9cc6-c372-4287-8e60-f1d9882c368c"}, properties:{winner:1, isStartPlayer:true, points:0.0}}, {start: {uuid:"fba9bf6e-38c3-438d-95a2-99b7787e7667"}, end: {uuid:"07fa9cc6-c372-4287-8e60-f1d9882c368c"}, properties:{winner:0, isStartPlayer:false, points:16.0}}, {start: {uuid:"fba9bf6e-38c3-438d-95a2-99b7787e7667"}, end: {uuid:"b0540c9e-68a0-4ca4-8647-b34e2ce406c8"}, properties:{winner:0, isStartPlayer:true, points:18.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"b0540c9e-68a0-4ca4-8647-b34e2ce406c8"}, properties:{winner:1, isStartPlayer:false, points:1.0}}, {start: {uuid:"46a62ede-ee9e-411d-aaa5-158b4e1cc3dc"}, end: {uuid:"a626c3de-afca-4bb4-815f-caae3752b88a"}, properties:{winner:0, isStartPlayer:true, points:18.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"a626c3de-afca-4bb4-815f-caae3752b88a"}, properties:{winner:1, isStartPlayer:false, points:0.0}}, {start: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, end: {uuid:"68a205a0-07e8-4f51-bc25-9920035c8393"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"68a205a0-07e8-4f51-bc25-9920035c8393"}, properties:{winner:1, isStartPlayer:false, points:0.0}}, {start: {uuid:"a334c7b2-d031-46cf-b7db-9401326e2147"}, end: {uuid:"a9571631-ea5e-4851-b0f7-91205bec1e8b"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"a9571631-ea5e-4851-b0f7-91205bec1e8b"}, properties:{winner:1, isStartPlayer:false, points:0.0}}, {start: {uuid:"2b64a6f9-d0e0-4590-817f-2318ba0fc242"}, end: {uuid:"40bd98a4-f916-4619-b841-ab6ad538a8b7"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"40bd98a4-f916-4619-b841-ab6ad538a8b7"}, properties:{winner:1, isStartPlayer:false, points:0.0}}, {start: {uuid:"2b64a6f9-d0e0-4590-817f-2318ba0fc242"}, end: {uuid:"8a077ed2-4091-4902-9e1c-16337805e2de"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"8a077ed2-4091-4902-9e1c-16337805e2de"}, properties:{winner:1, isStartPlayer:false, points:0.0}}, {start: {uuid:"2b64a6f9-d0e0-4590-817f-2318ba0fc242"}, end: {uuid:"7a59df35-c794-40e9-9355-39796c2f08c6"}, properties:{winner:0, isStartPlayer:true, points:19.0}}, {start: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, end: {uuid:"7a59df35-c794-40e9-9355-39796c2f08c6"}, properties:{winner:1, isStartPlayer:false, points:9.0}}, {start: {uuid:"69d3d8e0-b330-4677-8b9d-dfc958623c27"}, end: {uuid:"f3bb5fe8-f1bb-49e6-b007-94097b98c04a"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, end: {uuid:"f3bb5fe8-f1bb-49e6-b007-94097b98c04a"}, properties:{winner:1, isStartPlayer:false, points:7.0}}, {start: {uuid:"69d3d8e0-b330-4677-8b9d-dfc958623c27"}, end: {uuid:"ac2c20cf-614e-41b9-86fc-8f811dc9704c"}, properties:{winner:1, isStartPlayer:true, points:4.0}}, {start: {uuid:"93391a41-34e7-43ac-a714-c86c7706308b"}, end: {uuid:"ac2c20cf-614e-41b9-86fc-8f811dc9704c"}, properties:{winner:0, isStartPlayer:false, points:15.0}}, {start: {uuid:"00233343-7927-488c-8dab-6a6c9752b7b3"}, end: {uuid:"8b3159a2-d5aa-4d0f-90e2-0308d8434bb9"}, properties:{winner:1, isStartPlayer:true, points:0.0}}, {start: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, end: {uuid:"8b3159a2-d5aa-4d0f-90e2-0308d8434bb9"}, properties:{winner:0, isStartPlayer:false, points:15.0}}, {start: {uuid:"00233343-7927-488c-8dab-6a6c9752b7b3"}, end: {uuid:"1961e96b-5166-46e7-a24b-98b09309565a"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"1961e96b-5166-46e7-a24b-98b09309565a"}, properties:{winner:1, isStartPlayer:false, points:3.0}}, {start: {uuid:"00233343-7927-488c-8dab-6a6c9752b7b3"}, end: {uuid:"40ac21d1-5e5c-4417-b918-8d5c1b2b232b"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"40ac21d1-5e5c-4417-b918-8d5c1b2b232b"}, properties:{winner:1, isStartPlayer:false, points:0.0}}, {start: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, end: {uuid:"ef956b61-014b-47d0-9371-016f8fc90f7c"}, properties:{winner:0, isStartPlayer:true, points:15.0}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"ef956b61-014b-47d0-9371-016f8fc90f7c"}, properties:{winner:1, isStartPlayer:false, points:3.0}}, {start: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, end: {uuid:"fe76a7ab-6592-43c8-ac47-9cff0501189c"}, properties:{winner:0, isStartPlayer:true, points:16.0}}, {start: {uuid:"69d3d8e0-b330-4677-8b9d-dfc958623c27"}, end: {uuid:"fe76a7ab-6592-43c8-ac47-9cff0501189c"}, properties:{winner:1, isStartPlayer:false, points:7.0}}, {start: {uuid:"68adb9e7-e2d6-4e2d-9a7d-c182caac7798"}, end: {uuid:"556e05a2-ad9b-41bc-83d2-e87331bb7993"}, properties:{winner:1, isStartPlayer:true, points:11.0}}, {start: {uuid:"9ced20c8-61b8-46ca-9c0b-ce44c40ea528"}, end: {uuid:"556e05a2-ad9b-41bc-83d2-e87331bb7993"}, properties:{winner:0, isStartPlayer:false, points:15.0}}, {start: {uuid:"00233343-7927-488c-8dab-6a6c9752b7b3"}, end: {uuid:"ff6a5795-169a-4853-83ea-5025d45c8b3b"}, properties:{winner:1.0, isStartPlayer:true, points:0.0}}, {start: {uuid:"a334c7b2-d031-46cf-b7db-9401326e2147"}, end: {uuid:"ff6a5795-169a-4853-83ea-5025d45c8b3b"}, properties:{winner:1.0, isStartPlayer:false, points:16.0}}] AS row
MATCH (start:User{uuid: row.start.uuid})
MATCH (end:Game{uuid: row.end.uuid})
MERGE (start)-[r:PLAYED_GAME]->(end) SET r += row.properties;
UNWIND [{start: {uuid:"fba9bf6e-38c3-438d-95a2-99b7787e7667"}, end: {uuid:"9f64bdab-865a-4346-a689-bf81ac2c9ea8"}, properties:{pendingRequest:false}}, {start: {uuid:"9f64bdab-865a-4346-a689-bf81ac2c9ea8"}, end: {uuid:"2b64a6f9-d0e0-4590-817f-2318ba0fc242"}, properties:{pendingRequest:false}}, {start: {uuid:"9f64bdab-865a-4346-a689-bf81ac2c9ea8"}, end: {uuid:"a334c7b2-d031-46cf-b7db-9401326e2147"}, properties:{pendingRequest:true}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"93391a41-34e7-43ac-a714-c86c7706308b"}, properties:{pendingRequest:true}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"9ced20c8-61b8-46ca-9c0b-ce44c40ea528"}, properties:{pendingRequest:true}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"68adb9e7-e2d6-4e2d-9a7d-c182caac7798"}, properties:{pendingRequest:true}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"69d3d8e0-b330-4677-8b9d-dfc958623c27"}, properties:{pendingRequest:true}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"46a62ede-ee9e-411d-aaa5-158b4e1cc3dc"}, properties:{pendingRequest:true}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, properties:{pendingRequest:true}}, {start: {uuid:"34145526-8bb8-42e7-a17e-b32597c36b3f"}, end: {uuid:"00233343-7927-488c-8dab-6a6c9752b7b3"}, properties:{pendingRequest:true}}, {start: {uuid:"2b64a6f9-d0e0-4590-817f-2318ba0fc242"}, end: {uuid:"0b6d047e-cb94-42e6-b7fc-ad7d411f8ef4"}, properties:{pendingRequest:false}}, {start: {uuid:"2b64a6f9-d0e0-4590-817f-2318ba0fc242"}, end: {uuid:"fba9bf6e-38c3-438d-95a2-99b7787e7667"}, properties:{pendingRequest:true}}] AS row
MATCH (start:User{uuid: row.start.uuid})
MATCH (end:User{uuid: row.end.uuid})
MERGE (start)-[r:FRIENDS]->(end) SET r += row.properties;
:commit
